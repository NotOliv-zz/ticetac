<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    <title>Document</title>
</head>

<body>
    

        <!-- HEADER -->
        <%- include('navbar'); %>

      <!-- Tableau last trip -->


      <div class="mytickets">
        <h1>My tickets :</h1>
       </div>
      <div class="row justify-content-center">
        <div class="col-6">
        <table class="table table-borderless">
        <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col">Journey</th>
            <th scope="col">Date</th>
            <th scope="col">Departure time</th>
            <th scope="col">Price</th>
          </tr>
        </thead>
        <tbody>
          <% var total=0
            for(i=0;i<mytickets.length;i++) { %>
          <tr>
            <th scope="row"><%=i+1%></th>
            <td><%=mytickets[i].departure%> / <%=mytickets[i].arrival%></td>
            <td><%=dateFormat(mytickets[i].date)%></td>
            <td><%=mytickets[i].departureTime%></td>
            <td><%=mytickets[i].price%>€</td>
          </tr>
          <% 
            total+=mytickets[i].price
          }%>
        

          <tr class="table-danger">
            <th scope="row">Total</th>
            <td></td>
            <td></td>
            <td></td>
            <td><%=total%>€</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

    <div class="row offset-8" >
      <div>

        <!-- Button trigger modal -->

  <button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#exampleModal">
   Confirm 
</button>


<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Confirm</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <h2> My Tickets : </h2>
        <% for (var i = 0 ; i < mytickets.length; i++) { %> 
          <p> <%=mytickets[i].departure%> / <%=mytickets[i].arrival%> le <%=dateFormat(mytickets[i].date)%> </p>
        <%} %>
      </div>
      <div class="modal-footer">
        <a href="/confirm"> <button type="button" class="btn btn-secondary">Close</button></a>
      </div>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>
</body>